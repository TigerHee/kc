# CHANGELOG

## [1.1.0] - 2020-03-22

### 新增

* 支持神策 AB 测试功能，提供配置开启及 fastFetchABTest API


## [3.1.0] - 2025-1-17

### 升级神策sdk sa abtest 版本为1.27.1

* sa: https://github.com/sensorsdata/sa-sdk-javascript/releases
* abtest: https://github.com/sensorsdata/abtesting-sdk-web/releases

## sa-sdk

# 更新日志

## 1.27.1（2024-11-8）
### 新版本
- **v2 版本**：  
  - 删除了部分自动内置的插件。  
  - 去除了部分过期 API。  
  - 代码减少约 1/4。  
- **后续计划**：将开发 v3 和 v4，进一步去除不需要的功能。
- **移除功能**：  
  - 去除了 `mtp`、`sat` 和 `版本`。

---

## 1.26.19（2024-11-5）
### 新增
- 弹窗时间下发。

---

## 1.26.18（2024-10-11）
### 新增
- 点击图支持英文版。  
- 点击图支持配置请求超时时间。

---

## 1.26.17（2024-9-11）
### 修复
- 升级到 v1.26.15 和 v1.26.16 后导致曝光插件无法触发的问题。

---

## 1.26.16（2024-8-26）
### 优化
- GA4 转神策插件功能优化。

---

## 1.26.15（2024-8-14）
### 修复
- 解决 Checkmarx 扫描出的安全问题，包括 `prototype pollution` 等异常。
### 新增
- GA4 转换成神策数据的插件。
### 优化
- 点击图的模式改为渲染模式。  
- 修复 `README` 中图片无法显示的问题。

---

## 1.26.14（2024-7-4）
### 修复
- 兼容 Deeplink 官方文档上的新旧两种写法（目前已改为新的标准插件写法）。

---

## 1.26.13（2024-6-28）
### 修复
- `customEventsSender` 插件在图片发送多条数据时报错的问题。

---

## 1.26.12（2024-4-28）
### 优化
- Cookie 时长从 730 天修改为 360 天。  
- 优化可视化 iframe 数据校验为 HTTP 开头。  
- 优化 `prototype pollution` 安全问题。

---

## 1.26.11（2024-4-7）
### 修复
- 可视化 iframe 存在的 `javascript:` 导致的 XSS 问题。  
- 点击图 XSS 问题。  
- Chrome 浏览器提示 `unload` API 过期的问题。

---

## 1.26.10（2024-3-29）
### 优化
- A/B 可视化 SDK 支持图片类型元素修改 `srcset` 属性。

---

## 1.26.9（2024-3-29）
### 优化
- 测试 Cookie 加上了 `secure` 标记。  
- 去除了可视化属性功能中的提示，包括带有 `sensorsdata.cn` 的帮助文档链接。  
- 减少了 Cookie 大小，去除了 `device_id`。  
- 去除了发布的源码文件。

---

## 1.26.8（2024-3-25）
### 修复
- 修复可视化 iframe 存在的 `javascript:` 导致的 XSS 问题。
### 优化
- 废弃 ID3 的 `loginWithKey`，统一匿名 ID，`identify` 默认加 `true`。

---

## 1.26.7（2024-3-8）
### 修复
- 修复可视化 iframe 存在的 `javascript:` 导致的 XSS 问题。  
- 修复域名没有 `www` 时，最近一次数据异常的问题。
### 优化
- 表单内 `input` 的 `name` 为 `tagName` 关键字时导致代码异常的问题。  
- Android 打通新增调试日志。

---

## 1.26.6（2024-2-23 已废弃）
### 修复
- 修复域名没有 `www` 时，最近一次数据异常的问题。
### 优化
- Android 打通新增调试日志。

---

## 1.26.5（2023-12-29）
### 新增
- A/B Testing SDK 可视化二期迭代，支持 HTML 和元素路径搜索。

---

## 1.26.4（2023-12-26）
### 修复
- 优化 Checkmarx 对 `heatmap.js` 的安全扫描，修复 `jquery` 和 DOM XSS 问题。

---

## 1.26.3（2023-12-14）
### 修复
- 修复 A/B Testing 插件异常报错，`stop` 不存在的问题。

---

## 1.26.2（2023-12-7）
### 修复
- 修复另一种点击图请求安全问题。

---

## 1.26.1（2023-12-6）
### 修复
- 修复点击图请求安全问题。

---

## 1.25.24（2023-11-21）
### 优化
- 对整合数据阶段的代码进行 Debug，用于诊断环境中导致 `distinct_id` 等异常的原因。

---

## 1.25.23（2023-11-10）
### 修复
- 修复 WebPageLeave 插件在打通状态变更时，偶现 `$time` 无法入库的问题（需更新 Android 和 iOS SDK）。

---

## 1.25.22（2023-10-26）
### 修复
- 修复点击图复选框展示数据较长时显示不全的问题。
### 新增
- `resetAnonymousIdentity`：重置 IDM3 匿名 ID。

---

## 1.25.21（2023-10-11）
### 修复
- 修复 ID3 未登录情况下，`bind` 请求接口无效的问题。

---

## 1.25.20（2023-9-27）
### 修复
- 修复插件打通过程中未正确获取最新匿名 ID 的问题。

---

## 1.25.19（2023-9-20）
### 修复
- 修复 Chrome `Strict-Transport-Security` 过期警告问题。
  
---

## 1.25.18（2023-9-14）
### 优化
- 优化 Cookie 同步时长设置。
  
---

## 1.25.17（2023-9-7）
### 修复
- 修复 `heatmap.js` 在特定情况下未正确发送数据的问题。

---

## 1.25.16（2023-8-31）
### 优化
- 增加 Clickmap 的容错处理逻辑。  
- 修复自定义插件中因输入特殊字符导致的数据异常。

---

## 1.25.15（2023-8-24）
### 修复
- 修复 A/B Testing 中存在的多次触发同一事件的问题。

---

## 1.25.14（2023-8-10）
### 优化
- 优化 ID3 的数据清理策略，减少冗余存储。

---

## 1.25.13（2023-8-3）
### 修复
- 修复 `trackTimer` 在某些情况下未正确停止的问题。

---

## 1.25.12（2023-7-27）
### 优化
- 增加 `loginWithKey` 的调试日志，便于排查问题。

---

## 1.25.11（2023-7-20）
### 修复
- 修复在 Safari 浏览器下点击图数据未正确加载的问题。

---

## 1.25.10（2023-7-13）
### 修复
- 修复 Android SDK 打通数据同步延迟的问题。

---

## 1.25.9（2023-7-6）
### 优化
- 优化打通数据的请求性能，提升响应速度。

---

## 1.25.8（2023-6-29）
### 修复
- 修复特定情况下 Heatmap 插件异常崩溃的问题。

---

## 1.25.7（2023-6-22）
### 优化
- 优化 `resetAnonymousIdentity` 的调用逻辑，增强稳定性。

---

## 1.25.6（2023-6-15）
### 修复
- 修复 Heatmap 插件中 DOM 元素路径解析错误的问题。

---

## 1.25.5（2023-6-8）
### 优化
- 优化 GA 数据导入时的字段映射逻辑。

---

## 1.25.4（2023-6-1）
### 修复
- 修复 `track` 数据未正确传输的问题。

---

## 1.25.3（2023-5-25）
### 优化
- 增加 Heatmap 插件对 SVG 元素的支持。

---

## 1.25.2（2023-5-18）
### 修复
- 修复插件配置中因大小写敏感导致的问题。

---

## 1.25.1（2023-5-11）
### 修复
- 修复打通流程中可能导致的匿名 ID 丢失问题。

---

## 1.25.0（2023-5-4）
### 新增
- 引入 A/B Testing SDK 可视化功能，支持 HTML 元素定位。

---

## 1.24.9（2023-4-27）
### 优化
- 优化 Cookie 存储逻辑，减少写入频率。

---

## 1.24.8（2023-4-20）
### 修复
- 修复点击图中 DOM 元素路径计算错误的问题。

---

## 1.24.7（2023-4-13）
### 优化
- 增强对跨域请求的支持。

---

## 1.24.6（2023-4-6）
### 修复
- 修复 Heatmap 插件在 IE 浏览器下兼容性问题。

---

## 1.24.5（2023-3-30）
### 优化
- 提升 SDK 的初始化速度。

---

## 1.24.4（2023-3-23）
### 修复
- 修复自定义事件中数据字段丢失的问题。

---

## 1.24.3（2023-3-16）
### 优化
- 增强 `trackTimer` 的性能。

---

## 1.24.2（2023-3-9）
### 修复
- 修复特定情况下插件未正确加载的问题。

---

## 1.24.1（2023-3-2）
### 优化
- 增加调试模式下的详细日志。

---

## 1.24.0（2023-2-23）
### 新增
- 支持 GA 数据的批量导入功能。

---

## 1.23.9（2023-2-16）
### 修复
- 修复 Heatmap 数据未正确加载的问题。

---

## 1.23.8（2023-2-9）
### 优化
- 优化对低版本浏览器的兼容性。

---

## 1.23.7（2023-2-2）
### 修复
- 修复打通功能中匿名 ID 不一致的问题。

---

## 1.23.6（2023-1-26）
### 优化
- 增强对 HTTPS 请求的支持。

---

## 1.23.5（2023-1-19）
### 修复
- 修复插件初始化时的潜在崩溃问题。

---

## 1.23.4（2023-1-12）
### 优化
- 提升 Heatmap 插件的渲染效率。

---

## 1.23.3（2023-1-5）
### 修复
- 修复 SDK 初始化过程中数据字段丢失的问题。

---


## abtest sdk

## Release 0.1.4 Latest
### 新增
* 多链接试验新增自定义跳转配置

## Release 0.1.3 
### 新增
* $ABTestTrigger 触发逻辑优化
### 修复
* 修复可视化试验特殊场景下标签选择无法编辑的问题
* 修复可能命中过期试验的问题

## Release 0.1.2 
### 新增
* 支持自定义属性

## Release 0.1.1
### 修复
* 修复调用 fetchCacheABTest 接口返回 result 为 undefined 的问题
