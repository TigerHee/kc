# kux-design 组件开发指南
本文档是组件库开发的统一规范，旨在确保代码统一、易于维护和协作。

开发指南包含以下内容, 请按顺序阅读

* [总览](#)
* [组件代码规范](./2.typescript.md)
* [样式规范](./3.style.md)
* [stories 用例及文档](./4.doc.md)
* [测试用例](./5.test.md)
* [网站更新&库的发布](./6.release.md)

## 基本介绍
turbo + pnpm + react + typescript + vite(vitest) + sass + storybook 构建:

* turbo + pnpm: monorepo 管理及依赖管理
* typescript: 为JS增加类型系统, 提共代码提示及校验, 提升代码质量
* sass: css 预编译语言, 提升css的可编程性
* vite + vitest: 项目构建/自动化测试, 相比webpack性能更高, 使用体验更好
* storybook: 组件文档及开发时的playground


## 环境准备
* node >= 20.10.0
* pnpm >= 9.12.1, 使用 `npm install -g pnpm` 安装

## 准备开发
在本仓库根目录下执行下述命令将仓库热身:

```sh
# 安装整个仓库依赖
pnpm i

# 构建所有包, 保证组件库依赖的包已构建
pnpm build
```

## 创建组件
在本包目录下执行下述命令来创建新组件
```sh
# 执行命令后, 根据提示输入组件名称
pnpm addc
```

命令执行完会在 `src/components` 目录中创建组件文件夹, 结构如下

```sh
./<component-name>
├── assets # 组件的静态资源文件夹, 默认无, 按需手动创建
├── test.tsx # 组件的测试用例文件
├── index.tsx # 组件入口文件
├── readme.mdx # 组件readme 文件
├── stories.tsx # 组件 storybook 用例, 用于开发测试, 也用于在文档站点演示组件的用法
└── style.scss # 组件的样式文件
```

除了上述文件(夹), 可按需创建其他文件(夹), 保证该组件 **所有专属** 的内容都在该文件夹中.


## 开始开发
执行下述命令启动开发服务器, 进入开发模式

```sh
pnpm dev
```
* 启动服务器后访问 <http://localhost:6006/> 即可打开组件库的storybook页面
* 在左侧导航找到你的组件, 点击其中带有 书签🔖 图表的菜单, 查看当前组件在storybook中呈现的效果
* 修改组件代码, storybook会自动刷新, 可同步修改 `stories.tsx` 中的用例以更好的进行开发测试

## 注意要点
* [ ] 组件命名应当尽量与设计稿中的一致
* [ ] 组件的 readme.mdx 中应当贴上对应设计稿的地址
* [ ] 组件的 stories.tsx 应当增加名为 `ShowCase` 的用例, 用例内组件的排布、使用应当尽量与设计稿对齐, 方便设计同学验收
* [ ] 若组件的使用与 @kux/mui 中对应组件有差异, 请在文档 `packages/kux-design/docs/migrate-from-mui.mdx` 中补充升级说明